# Video-Compression-by-exploiting-spatial-and-temporal-redunduncy.

## Notebooks main reference :
Video Compression-Compact and Motion_Estimation_and_Compensation notebooks are our own implementaton for chapter 3 of "H.264 and MPEG-4 Video Compression Video Coding for Next-generation Multimedia" *By Iain E. G. Richardson The Robert Gordon University, Aberdeen, UK
We have used Discrete Cosine Transform for spatial model , and huffman for entropy encoding .

## How to run notebooks :
1-***Open folder "Video_compression_spatial_model" then open "Video Compression-Compact.ipynb"***. It is the main notebook, other files in this folder are codes/functions to support main notebook .It is recommended to start exploring this one.

2-***Open folder "video_compression_temporal_model" then open "Motion_Estimation_and_Compensation.ipynb"***. It is the meant notebook for compression using temporal redundency.Other files in this folder are codes/functions to support it.

## Video Compression:

Compression is the process of compacting data into a smaller number of bits. Video compression (video coding) is the process of compacting or condensing a digital video sequence
into a smaller number of bits. ‘Raw’ or uncompressed digital video typically requires a
large bitrate (approximately 216 Mbits for 1 second of uncompressed TV-quality video, see
 and compression is necessary for practical storage and transmission of digital
video. 

  Compression involves a complementary pair of systems, a compressor (encoder) and
a decompressor (decoder). The encoder converts the source data into a compressed form
(occupying a reduced number of bits) prior to transmission or storage and the decoder converts
the compressed form back into a representation of the original video data. The encoder/decoder
pair is often described as a CODEC (enCOder/ DECoder)    

  Data compression is achieved by removing redundancy, i.e. components that are not necessary for faithful reproduction of the data. Many types of data contain statistical redundancy
and can be effectively compressed using lossless compression, so that the reconstructed data
at the output of the decoder is a perfect copy of the original data. Unfortunately, lossless compression of image and video information gives only a moderate amount of compression. The
best that can be achieved with current lossless image compression standards such as JPEG-LS
 is a compression ratio of around 3–4 times.  
 
 Lossy compression is necessary to achieve
higher compression. In a lossy compression system, the decompressed data is not identical to
the source data and much higher compression ratios can be achieved at the expense of a loss
of visual quality. Lossy video compression systems are based on the principle of removing
subjective redundancy, elements of the image or video sequence that can be removed without
significantly affecting the viewer’s perception of visual quality.

## Notebook scopes 

Most video coding methods exploit both temporal and spatial redundancy to achieve
compression.   
In *Video Compression-Compact Notebook*, we will focus on how to exploit  spatial redundancy .  
In the spatial domain, there is usually a high correlation between
pixels (samples) that are close to each other, i.e. the values of neighbouring samples are often
very similar. 

In*Motion_Estimation_and_Compensation notebook* , we will focus on how to exploit temporal redundancy .

## *Regarding Video Compression-Compact Notebook*

### Estimated Time to run notebook is  25 Minutes.

### Achieved compression is 23.5 times less than original video

### Code Flow :
code is divided into 6 main sections  

* Import necessary libraries and huffman and dct project files  


* Functions that handle the following 
                            * Counting video frames 
                            * Converting video to frames 
                            * Given a list of frames/images , write it to a specified directory 
                            * Converting frames to video
                            * Creating thumbnails from images with the aid of PIL library
                            
* Color space conversion 
                            * Converting from rgb to YCrCb and vice versa 
                            * Creating images out of numpy arrays 
                            * Merging y, cr , cb component back into ycrcb image 
 
* Main function Video codec 
                            * loop over every video frame . Split it to its y, cr, cb componets 
                            * Apply low compression on y component while applying high compression on cr, cb using DCT 
                            * Apply entropy encoding " Huffman"
                            
 
* Quantative analysis       
                            * Calculate time to encode/decode certain number of frames . 
                            * Compression ratio 
                            
                            
### References
  

#### Online lectures ( Really useful)
https://www.youtube.com/watch?v=OdYlNAFYq44&t=2033s  
https://www.youtube.com/watch?v=Tm4C2ZFd3zE&t=1347s  
https://www.youtube.com/watch?v=jRrs9OxLTYM

#### Online course 
https://www.coursera.org/learn/digital/home/welcome  

####  Textbook for python coding  
Image Operators: Image Processing in Python  
link to download http://93.174.95.29/_ads/9B2E3E52CDD3BA0195FD13256177470B

#### Textbook for concept itself 

 "H.264 and MPEG-4 Video Compression Video Coding for Next-generation Multimedia" *By Iain E. G. Richardson The Robert Gordon University, Aberdeen, UK


#### Useful video about yuv color space 
https://www.youtube.com/watch?v=SjN_vCDi6_I  

#### useful video about resizing images using pil library   
https://www.youtube.com/watch?v=6Qs3wObeWwc

### Python skills 

https://stackoverflow.com/questions/33311153/python-extracting-and-saving-video-frames  

https://www.pyimagesearch.com/2017/01/09/count-the-total-number-of-frames-in-a-video-with-opencv-and-python/  


https://www.geeksforgeeks.org/python-pil-image-convert-method/  


https://stackoverflow.com/questions/2797102/python-imaging-ycbcr-problems  



https://stackoverflow.com/questions/5800009/python-and-pil-pixel-values-different-for-gif-and-jpeg  


https://stackoverflow.com/questions/11064786/get-pixels-rgb-using-pil  


http://2017.compciv.org/guide/topics/python-nonstandard-libraries/pillow.html

https://www.geeksforgeeks.org/python-pil-getpixel-method/  

https://stackoverflow.com/questions/46923244/how-to-create-image-from-a-list-of-pixel-values-in-python3    

https://stackoverflow.com/questions/39939595/save-different-channels-of-ycbcr-as-seperate-images-python    

https://stackoverflow.com/questions/26392336/importing-images-from-a-directory-python  

https://stackoverflow.com/questions/14134892/convert-image-from-pil-to-opencv-format  

                            
                            
                            
                            
                            
                            
                            
                            
                            
                            
                                                    
                            
 
 
